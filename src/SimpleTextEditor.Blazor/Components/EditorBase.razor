@namespace SimpleTextEditor.Blazor.Components

<div class="@ContainerClass" @ref="_containerRef">
    @* Toolbar *@
    <ToolbarBase Items="@ToolbarItemsList"
                 IconProvider="@IconProviderInstance"
                 LocalizationProvider="@LocalizationProviderInstance"
                 OnClick="@HandleToolbarClick"
                 ActiveCheck="@IsToolbarItemActive"
                 Class="@ThemeInstance.ToolbarClass" />
    
    @* Main content area *@
    <div class="ste-main @LayoutClass">
        @* Editor *@
        <div class="ste-editor-wrapper @(ShowPreview && CurrentPreviewMode == PreviewMode.Toggle ? "ste-hidden" : "")">
            <textarea @ref="_textareaRef"
                      class="@ThemeInstance.EditorClass"
                      placeholder="@EffectivePlaceholder"
                      readonly="@ReadOnly"
                      style="min-height: @(MinHeight)px; @(MaxHeight > 0 ? $"max-height: {MaxHeight}px;" : "")"
                      @bind="InternalValue"
                      @bind:event="oninput"
                      @onkeydown="HandleKeyDown" />
        </div>
        
        @* Preview *@
        @if (CurrentPreviewMode != PreviewMode.None)
        {
            <div class="ste-preview-wrapper @(!ShowPreview && CurrentPreviewMode == PreviewMode.Toggle ? "ste-hidden" : "")">
                @if (CurrentPreviewMode == PreviewMode.SideBySide)
                {
                    <div class="ste-preview-header">@LocalizationProviderInstance.Get("previewTitle")</div>
                }
                <PreviewPanel HtmlContent="@PreviewHtml"
                              EmptyMessage="@LocalizationProviderInstance.Get("noPreview")"
                              Class="@ThemeInstance.PreviewClass" />
            </div>
        }
    </div>
</div>
